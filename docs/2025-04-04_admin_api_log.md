# π“‹ 2025-04-04 κ΄€λ¦¬μ κΈ°λ¥ κµ¬ν„ μ •λ¦¬

## β… κΈ°λ¥ μ”μ•½

| κΈ°λ¥ | μ„¤λ… |
|------|------|
| μ‚¬μ©μ ν¬μΈνΈ μ§€κΈ‰ | κ΄€λ¦¬μκ°€ νΉμ • μ‚¬μ©μμ—κ² ν¬μΈνΈ μλ™ μ§€κΈ‰ |
| μ‚¬μ©μ ν¬μΈνΈ μ°¨κ° | κ΄€λ¦¬μκ°€ ν¬μΈνΈλ¥Ό μ°¨κ°ν•  μ μμ |
| μ‚¬μ©μ ν¬μΈνΈ μ΄κΈ°ν™” | λ³΄μ  ν¬μΈνΈλ¥Ό 0μΌλ΅ λ§λ“¤κ³ , μ°¨κ° μ΄λ ¥ μ €μ¥ |
| μ‚¬μ©μ μ‚­μ  | κ΄€λ¦¬μκ°€ μ‚¬μ©μλ¥Ό DBμ—μ„ μ‚­μ  (κ΄€λ ¨ μ΄λ ¥ ν•¨κ» μ‚­μ ) |

---

## π› οΈ κµ¬ν„ λ©ν‘

- ν¬μΈνΈ μ§€κΈ‰/μ°¨κ°/μ΄κΈ°ν™” κΈ°λ¥ μ™„μ„±
- μ‚¬μ©μ μ‚­μ  μ‹ μ—°κ΄€ λ°μ΄ν„°(points, invite)λ„ ν•¨κ» μ κ±°
- Spring Security κ¶ν• λ¶„λ¦¬ μ¤€λΉ„ (ν„μ¬λ” permitAll)

---

## π—‚οΈ λ””λ ‰ν† λ¦¬λ³„ μ£Όμ” νμΌ

### π“ `controller`
- `AdminController.java`  
  β†³ κ΄€λ¦¬μ API μ—”λ“ν¬μΈνΈ μ •μ

### π“ `service`
- `AdminService.java`  
  β†³ κ΄€λ¦¬μ λ΅μ§ μ²λ¦¬ (ν¬μΈνΈ μ§€κΈ‰/μ°¨κ°/μ΄κΈ°ν™”/μ‚­μ )

### π“ `entity`
- `User.java`  
  β†³ `points`, `invite`μ™€μ μ—°κ΄€κ΄€κ³„ μ¶”κ°€ (cascade, orphanRemoval)
- `Points.java`  
  β†³ ν¬μΈνΈ μ λ¦½/μ°¨κ° λ‚΄μ—­ μ €μ¥
- `Invite.java`  
  β†³ μ¶”μ²μΈ/ν”Όμ¶”μ²μΈ μ €μ¥

### π“ `dto`
- `AdminPointRequestDto.java`  
  β†³ `{ "userId": ..., "amount": ..., "description": ... }` κµ¬μ΅°λ΅ ν¬μΈνΈ μ§€κΈ‰ μ”μ²­
- `UserDto.java`  
  β†³ μ‚¬μ©μ μ‘λ‹µ DTO

---

## π”„ μ‹¤ν–‰ νλ¦„ μ”μ•½

μ: μ‚¬μ©μ μ‚­μ  API (`DELETE /api/admin/users/{id}`)

```
[Controller] AdminController.deleteUser()
    β†“
[Service] AdminService.deleteUser()
    β†“
[Repository] UserRepository.deleteById()
    β†“
[DB] μ—°κ΄€λ Points, Invite μλ™ μ‚­μ  (cascade + orphanRemoval)
```

---

## β… ν…μ¤νΈ κ²°κ³Ό

### π“ ν¬μΈνΈ μ§€κΈ‰ ν…μ¤νΈ

```
POST /api/admin/points
Body:
{
  "userId": 2,
  "amount": 1000,
  "description": "κ΄€λ¦¬μ ν…μ¤νΈ μ§€κΈ‰"
}
κ²°κ³Ό: 200 OK
```

### π“ μ‚¬μ©μ μ‚­μ  ν…μ¤νΈ

```
DELETE /api/admin/users/5
κ²°κ³Ό: 200 OK
Body: μ‚¬μ©μ μ‚­μ λμ—μµλ‹λ‹¤.
```

---

## π“ ν•™μµν• μ 

- `@OneToMany + cascade + orphanRemoval` μ„¤μ •μΌλ΅ μ—°κ΄€ λ°μ΄ν„° μλ™ μ‚­μ  μ²λ¦¬ κ°€λ¥
- μ™Έλν‚¤ μ μ•½ μ¤λ¥ ν•΄κ²°μ„ μ„ν•΄ λ¨λ“  μ—°κ΄€κ΄€κ³„λ¥Ό λ…ν™•ν μ„¤μ •ν•΄μ•Ό ν•¨
- ν•„λ“ μ΄λ¦„ λ³€κ²½ μ‹ DTOμ™€ getter/setter μ—°μ‡„ μν–¥ μ£Όμν•΄μ•Ό ν•¨

---

**λ‹¤μ λ©ν‘: steps, pushToken λ“±μ μ—°κ΄€κ΄€κ³„ μ¶”κ°€ + λ³΄μ• κ°•ν™” (ROLE_ADMIN μ²΄ν¬)**
