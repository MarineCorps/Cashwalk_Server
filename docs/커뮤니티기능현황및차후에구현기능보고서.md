
# 🧾 커뮤니티 기능 최종 구현 보고서

- 📅 작성일: 2025-04-12
- 🧩 대상 시스템: 게시글, 댓글, 좋아요, 북마크, 신고, 차단, 조회수 등 커뮤니티 전반
- 🛠️ 기술 스택: Spring Boot + QueryDSL + Redis + MySQL

---

## ✅ 전체 구현 기능 요약

### 📌 게시글 기능 (`CommunityService`)
- 게시글 작성 / 수정 / 삭제
- 게시글 상세 조회 (+ 댓글 포함)
- 게시글 조회 시 조회수 증가 (중복 방지 - Redis 사용)
- 게시글 좋아요 / 싫어요 토글 기능
- 게시글 정렬 + 검색 기능 (QueryDSL)
- BESTLIVE / LEGEND 게시판 자동 승격 기능 (스케줄러)

### 📌 댓글 기능 (`CommentService`)
- 댓글 작성 / 수정 / 삭제
- 댓글 좋아요 / 비추천 기능
- 답댓글 포함한 계층 구조 지원
- 차단 유저가 작성한 댓글/답댓글 완전 필터링
- 댓글 수(`commentCount`) 자동 반영

### 📌 차단 기능 (`UserBlock`)
- 특정 유저 차단 / 해제
- 차단한 유저의 글, 댓글 모두 숨김 처리
- 필터링은 `searchPosts()`, `getCommentsByPostId()`에 적용됨

### 📌 좋아요/댓글 수 동기화
- post.likeCount / post.commentCount 수동 증가/감소
- 좋아요/싫어요/댓글 삭제 시 DB 필드 갱신 처리됨

### 📌 신고 기능 (`ReportService`)
- 게시글 또는 댓글에 대해 신고 기능
- 신고자, 신고 대상(post/comment), 신고 사유 Enum으로 처리
- 신고 기록 DB에 저장됨

### 📌 북마크 기능 (`BookmarkService`)
- 게시글 북마크 등록 / 해제 (toggle)
- 내가 북마크한 글 조회 API 제공

### 📌 마이페이지 기능
- 내가 쓴 글 목록
- 내가 쓴 댓글 목록
- 내가 댓글 단 게시글 목록
- 내가 북마크한 게시글 목록
- 내 댓글 중 답댓글이 달린 댓글 목록

---

## 🔍 점검 및 발견된 미구현/보완 가능한 기능

| 항목 | 설명 |
|------|------|
| 🚫 신고 중복 방지 | 현재 동일 유저가 같은 게시글/댓글을 반복 신고할 수 있음 |
| 🚫 신고 후 관리자 조치 | 관리자 페이지가 없어 신고 후 자동 삭제/블라인드 기능 없음 |
| 🟡 댓글 트리 응답 구조 | 현재 flat 구조, 계층 구조 응답은 향후 개선 가능 |
| 🚫 알림 기능 (댓글/좋아요 등) | 실시간 알림 (ex: FCM) 미도입 상태 |

---

## 🔮 향후 확장 고려 기능 (선택 사항)

| 기능 | 설명 |
|------|------|
| Redis 기반 좋아요/댓글 캐싱 | 실시간 카운트 성능 개선 |
| 신고 누적 자동 블라인드 | 신고 횟수에 따라 게시글 자동 비공개 처리 |
| 관리자 페이지 | 신고 내역 관리, 사용자 정지, 공지 기능 등 |
| 알림 기능 | Firebase 연동 시 알림 시스템 구현 |
| 실시간 댓글 / 채팅 | WebSocket 기반 댓글 스트리밍도 가능 |

---

## 🧠 느낀 점 / 학습한 점

- JWT 기반 사용자 인증과 Spring Security 필터링 흐름 이해
- QueryDSL을 통한 조건부 필터링, 정렬, 페이징 처리 경험
- 실무에서 사용되는 차단/신고/댓글 트리 필터링 전략 체득
- Redis를 활용한 조회수 중복 방지와 향후 확장 가능성 확보
- 기능 단위로 명확하게 역할 분리된 서비스 구조 설계

---

🔥 이 문서는 커뮤니티 기능 백엔드의 **최종 정리 자료**입니다.
이후 기능 확장이나 유지보수 시 참조용으로 활용하세요!
