# β… κ΄€λ¦¬μ ν¬μΈνΈ μ΄κΈ°ν™” κΈ°λ¥ κµ¬ν„ κΈ°λ΅

- π“… λ‚ μ§: 2025-04-04
- π”§ κµ¬ν„ λ©ν‘: κ΄€λ¦¬μκ°€ νΉμ • μ‚¬μ©μμ ν¬μΈνΈλ¥Ό 0μΌλ΅ μ΄κΈ°ν™”ν•  μ μλ” κΈ°λ¥ κµ¬ν„

---

## β… κΈ°λ¥ μ”μ•½

| κΈ°λ¥ | μ„¤λ… |
|------|------|
| ν¬μΈνΈ μ΄κΈ°ν™” | νΉμ • μ‚¬μ©μμ ν¬μΈνΈλ¥Ό 0μΌλ΅ μ„¤μ •ν•κ³  μ΄λ ¥ μ €μ¥ |
| μ΄λ ¥ νƒ€μ… κµ¬λ¶„ | `RESET` νƒ€μ…μΌλ΅ `points` ν…μ΄λΈ”μ— μ €μ¥λ¨ |
| REST API μ—”λ“ν¬μΈνΈ | `POST /api/admin/reset-points?userId=1` |

---

## π“ μμ •/μƒμ„±λ νμΌ λ©λ΅

| νμΌλ… | ν¨ν‚¤μ§€ | μ„¤λ… |
|--------|--------|------|
| `PointsType.java` | `entity` | `RESET` enum μƒμ μ¶”κ°€ |
| `PointsService.java` | `service` | `resetPoints(User user)` λ©”μ„λ“ μ¶”κ°€ |
| `AdminService.java` | `service` | `resetUserPoints(Long userId)` λ©”μ„λ“ μ¶”κ°€ |
| `AdminController.java` | `controller` | `@PostMapping("/reset-points")` API μ¶”κ°€ |

---

## π”„ μ „μ²΄ μ‹¤ν–‰ νλ¦„

1. κ΄€λ¦¬μμ—μ„ `POST /api/admin/reset-points?userId=1` μ”μ²­
2. `AdminController` β†’ `AdminService.resetUserPoints(...)` νΈμ¶
3. μ‚¬μ©μμ ν„μ¬ ν¬μΈνΈ μ΅°ν
4. κΈ°μ΅΄ ν¬μΈνΈλ§νΌ μμλ΅ `Points` κΈ°λ΅ μ¶”κ°€ (`RESET`)
5. μ‚¬μ©μμ ν¬μΈνΈλ¥Ό 0μΌλ΅ μ—…λ°μ΄νΈ
6. μ‘λ‹µ: `"ν¬μΈνΈκ°€ μ΄κΈ°ν™”λμ—μµλ‹λ‹¤."`

---

## π§ ν…μ¤νΈ κ²°κ³Ό

- `points` ν…μ΄λΈ”μ— λ‹¤μκ³Ό κ°™μ€ μ΄λ ¥ μƒμ„±λ¨:

```
{
  "date": "2025-04-04",
  "amount": -3500,
  "type": "RESET"
}
```

- `/api/points/history`μ—μ„λ„ μ •μƒ μ¶λ ¥
- μ‘λ‹µ μ½”λ“: `200 OK`

---

## π” λ³΄μ• λ©”λ¨

- ν„μ¬λ” `/api/admin/**` κ²½λ΅ `permitAll()` μƒνƒ
- μ¶”ν›„ μ΄μ μ‹ `@PreAuthorize("hasRole('ADMIN')")` λλ” `user.isAdmin()` μ²΄ν¬ μ μ© μμ •

---

## π’΅ ν•™μµν• μ 

- μ΄κΈ°ν™”λ” μ§€κΈ‰/μ°¨κ° λ΅μ§κ³Ό λ™μΌν•κ² `μμ ν¬μΈνΈ + μ”μ•΅ μμ •`μΌλ΅ κµ¬ν„ κ°€λ¥
- μ΄λ ¥ κ΄€λ¦¬λ¥Ό ν†µν•΄ ν¬μΈνΈ λ³€κ²½ λ‚΄μ—­ μ¶”μ  κ°€λ¥
- enum νƒ€μ… μ¶”κ°€λ΅ μ΄λ ¥ κµ¬λ¶„μ΄ λ…ν™•ν•΄μ§
