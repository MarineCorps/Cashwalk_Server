# ğŸš€ EC2 Ubuntu ì„œë²„ì— Spring Boot í”„ë¡œì íŠ¸ ë°°í¬í•˜ëŠ” ì „ì²´ ê³¼ì • (feat. MySQL + Redis)

> âœ… ì´ ë¬¸ì„œëŠ” **Windows + Git Bash** í™˜ê²½ ê¸°ì¤€ìœ¼ë¡œ, EC2 ì„œë²„ì— `.jar` íŒŒì¼ì„ ìˆ˜ë™ìœ¼ë¡œ ë°°í¬í•˜ê³ , MySQLê³¼ Redisë¥¼ ì„¤ì •í•˜ì—¬ Spring Boot í”„ë¡œì íŠ¸ë¥¼ ì™„ì „í•˜ê²Œ êµ¬ë™í•˜ëŠ” ê³¼ì •ì„ ì •ë¦¬í•œ ë¬¸ì„œì…ë‹ˆë‹¤.  
> ê°œë°œìê°€ ì§ì ‘ í™•ì¸í•œ ë¸”ë¡œê·¸ ë§í¬, ëª…ë ¹ì–´ ìœ„ì¹˜, ì£¼ì˜í•  ì ê¹Œì§€ í¬í•¨ë˜ì–´ ìˆì–´ ë°˜ë³µ ë°°í¬ ì‹œ ë°”ë¡œ ë”°ë¼í•  ìˆ˜ ìˆë„ë¡ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ“– ì°¸ê³ í•œ ì´ˆê¸° ë¸”ë¡œê·¸

Velog: [SpringBoot í”„ë¡œì íŠ¸ EC2 ë°°í¬í•˜ê¸° by jonghyun3668](https://velog.io/@jonghyun3668/SpringBoot-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-EC2-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0)

í•´ë‹¹ ë¸”ë¡œê·¸ë¥¼ ë”°ë¼ ì´ˆê¸° EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„±, ë³´ì•ˆ ê·¸ë£¹ ì„¤ì •, `pem` í‚¤ ì €ì¥ ë“±ì„ ë¨¼ì € ìˆ˜í–‰í•¨.

---

## âœ… 1. EC2 ì¸ìŠ¤í„´ìŠ¤ ì ‘ì†

### ğŸ”¹ ì ‘ì† ëª…ë ¹ì–´ (Git Bashì—ì„œ ì‹¤í–‰)

```bash
ssh -i /c/Users/kimin/SSH/sshKey.pem ubuntu@<í¼ë¸”ë¦­IP ë˜ëŠ” ë„ë©”ì¸>
```

### ğŸ”¹ ì ‘ì† ì‹œ ë‚˜ì˜¤ëŠ” ì¸ì¦ ë¬¸êµ¬

```txt
The authenticity of host ... can't be established ...
Are you sure you want to continue connecting (yes/no/[fingerprint])?
```

â†’ `yes` ì…ë ¥ í›„ `Enter`

---

## âœ… 2. MySQL ì„¤ì¹˜ ë° ì´ˆê¸° ì„¤ì •

```bash
sudo apt update
sudo apt install mysql-server -y
sudo mysql_secure_installation
```

ì„¤ì • ì¤‘:

- íŒ¨ìŠ¤ì›Œë“œ ê²€ì¦ ì‚¬ìš© â†’ `y`
- ë³´ì•ˆ ì •ì±… ìˆ˜ì¤€ ì„ íƒ â†’ `0 (LOW)`
- root ë¹„ë°€ë²ˆí˜¸ ì„¤ì • â†’ (auth_socketìœ¼ë¡œ ìƒëµë¨)
- anonymous user ì œê±° â†’ `y`
- root ì›ê²© ì ‘ì† ì°¨ë‹¨ â†’ `y`
- test DB ì œê±° â†’ `y`
- ê¶Œí•œ í…Œì´ë¸” reload â†’ `y`

---

## âœ… 3. MySQL ì‚¬ìš©ì ë° DB ìƒì„±

```bash
sudo mysql -u root
```

```sql
CREATE DATABASE cashwalk CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'user1'@'%' IDENTIFIED BY 'password1234';
GRANT ALL PRIVILEGES ON cashwalk.* TO 'user1'@'%';
FLUSH PRIVILEGES;
```

`exit`ë¡œ ë‚˜ê°€ê¸°.

---

## âœ… 4. Redis ì„¤ì¹˜

```bash
sudo apt install redis-server -y
```

í™•ì¸:

```bash
sudo systemctl status redis-server
```

â†’ `"Ready to accept connections"`ì´ë©´ ì •ìƒ ì‘ë™ ì¤‘  
ë‚˜ê°€ê¸°: `q` í‚¤

---

## âœ… 5. JDK ì„¤ì¹˜

```bash
sudo apt install openjdk-17-jre -y
```

í™•ì¸:

```bash
java --version
```

---

## âœ… 6. ë¹Œë“œ í›„ `.jar` ì „ì†¡

### ğŸ”¹ í”„ë¡œì íŠ¸ ë¹Œë“œ (ë¡œì»¬ì—ì„œ)

```bash
./gradlew bootJar
```

`build/libs/cashwalk.jar` ìƒì„±ë¨

### ğŸ”¹ EC2ë¡œ ì „ì†¡ (Git Bash)

```bash
scp -i /c/Users/kimin/SSH/sshKey.pem ./build/libs/cashwalk.jar ubuntu@<EC2_IP>:~/cashwalk.jar
```

---

## âœ… 7. Firebase ì„¤ì • íŒŒì¼ ì „ì†¡

```bash
scp -i /c/Users/kimin/SSH/sshKey.pem /c/Users/kimin/cashwalk/src/main/resources/firebase/serviceAccountKey.json ubuntu@<EC2_IP>:~/serviceAccountKey.json
```

ì„œë²„ì—ì„œ ìœ„ì¹˜ ì´ë™:

```bash
mkdir -p ~/firebase
mv ~/serviceAccountKey.json ~/firebase/serviceAccountKey.json
```

---

## âœ… 8. Spring Boot ì‹¤í–‰

```bash
nohup java -jar cashwalk.jar > log.txt 2>&1 &
```

ë¡œê·¸ í™•ì¸:

```bash
tail -f log.txt
```

ì¤‘ì§€: `Ctrl + C`  
ë°°ê²½ ì‹¤í–‰ í™•ì¸:

```bash
ps -ef | grep java
```

ì¤‘ì§€:

```bash
kill -9 <PID>
```

---

## âœ… 9. application.properties ë¶„ë¦¬ êµ¬ì¡°

- `application.properties` (ê³µí†µ)
- `application-dev.properties` (ë¡œì»¬)
- `application-prod.properties` (ì„œë²„)

ì„œë²„ì—ëŠ” `prod` ì„¤ì •ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ `application.properties` ì•ˆì— ëª…ì‹œ:

```properties
spring.profiles.active=prod
```

---

## âœ… 10. EC2 ë¹„ìš© ê´€ë¦¬

ì„œë²„ ì¤‘ì§€:

```txt
AWS EC2 â†’ ì¸ìŠ¤í„´ìŠ¤ â†’ ì„ íƒ â†’ â¹ ì¤‘ì§€ ë²„íŠ¼ í´ë¦­
```

**Free TierëŠ” ì›” 750ì‹œê°„** (t2.micro or t3.micro ê¸°ì¤€)ì´ë¯€ë¡œ
**ì‚¬ìš©í•  ë•Œë§Œ ì¼œê³  ë‚˜ë¨¸ì§€ëŠ” êº¼ë‘ëŠ” ê²Œ ì•ˆì •ì **.

---

## âœ… ê¸°íƒ€ ë‹¨ì¶•í‚¤

| ìƒí™© | ë‹¨ì¶•í‚¤ |
|------|--------|
| `systemctl status ...` ë“± ì¶œë ¥ ì°½ì—ì„œ ë‚˜ê°€ê¸° | `q` |
| ì‹¤í–‰ ì¤‘ log í™•ì¸ ì¤‘ ë‚˜ê°€ê¸° | `Ctrl + C` |
| background ì‹¤í–‰ í›„ PID í™•ì¸ | `ps -ef | grep java` |
| ê°•ì œ ì¢…ë£Œ | `kill -9 <PID>` |

---

## ğŸ‰ ê²°ê³¼ í™•ì¸

- DB ìƒì„±ë¨
- Firebase ì •ìƒ ì—°ë™ë¨
- Redis ì—°ë™ ì„±ê³µ
- API í˜¸ì¶œ ê°€ëŠ¥
- `.jar` ë°°í¬ ë° ì‹¤í–‰ ì™„ë£Œ



ì„œë²„ë°°í¬ì‹œ ìœ ì˜ì 

# 1. uploads í´ë” ìƒì„±
mkdir uploads

# 2. ê¶Œí•œ ë¶€ì—¬ (ì½ê¸°+ì“°ê¸°+ì‹¤í–‰ ê¶Œí•œ)
chmod 755 uploads
 

íŒŒì´ì–´ë² ì´ìŠ¤ í´ë” ê²½ë¡œë³€ê²½ë„